!function(P,N,Y,q){"use strict";P.fn.pagepiling=function(e){var s,o=P.fn.pagepiling,i=P(this),c=0,n="ontouchstart"in Y||0<navigator.msMaxTouchPoints||navigator.maxTouchPoints,a=0,r=0,l=0,p=0,d=[],t=600,h=P.extend(!0,{direction:"vertical",menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"easeInQuart",loopBottom:!1,loopTop:!1,css3:!0,navigation:{textColor:"#000",bulletsColor:"#000",position:"right",tooltips:[]},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null},e);P.extend(P.easing,{easeInQuart:function(e,n,t,o,i){return o*(n/=i)*n*n*n+t}}),o.setScrollingSpeed=function(e){h.scrollingSpeed=e},o.setMouseWheelScrolling=function(e){e?i.length&&(i.get(0).addEventListener?(i.get(0).addEventListener("mousewheel",M,!1),i.get(0).addEventListener("wheel",M,!1)):i.get(0).attachEvent("onmousewheel",M)):i.get(0).addEventListener?(i.get(0).removeEventListener("mousewheel",M,!1),i.get(0).removeEventListener("wheel",M,!1)):i.get(0).detachEvent("onmousewheel",M)},o.setAllowScrolling=function(e){e?(o.setMouseWheelScrolling(!0),function(){{var e;n&&(e=k(),i.off("touchstart "+e.down).on("touchstart "+e.down,D),i.off("touchmove "+e.move).on("touchmove "+e.move,I))}}()):(o.setMouseWheelScrolling(!1),function(){{var e;n&&(e=k(),i.off("touchstart "+e.down),i.off("touchmove "+e.move))}}())},o.setKeyboardScrolling=function(e){h.keyboardScrolling=e},o.moveSectionUp=function(){var e=P(".pp-section.active").prev(".pp-section");(e=!e.length&&h.loopTop?P(".pp-section").last():e).length&&u(e)},o.moveSectionDown=function(){var e=P(".pp-section.active").next(".pp-section");(e=!e.length&&h.loopBottom?P(".pp-section").first():e).length&&u(e)},o.moveTo=function(e){var n="";0<(n=isNaN(e)?P(N).find('[data-anchor="'+e+'"]'):P(".pp-section").eq(e-1)).length&&u(n)},P(h.sectionSelector).each(function(){P(this).addClass("pp-section")}),h.css3&&(h.css3=function(){var e,n,t=N.createElement("p"),o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(n in N.body.insertBefore(t,null),o)t.style[n]!==q&&(t.style[n]="translate3d(1px,1px,1px)",e=Y.getComputedStyle(t).getPropertyValue(o[n]));return N.body.removeChild(t),e!==q&&0<e.length&&"none"!==e}()),P(i).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"}),o.setAllowScrolling(!0),P.isEmptyObject(h.navigation)||function(){P("body").append('<div id="pp-nav"><ul></ul></div>');var e=P("#pp-nav");e.css("color",h.navigation.textColor),e.addClass(h.navigation.position);for(var n=0;n<P(".pp-section").length;n++){var t,o="";h.anchors.length&&(o=h.anchors[n]),"undefined"===h.navigation.tooltips||void 0===(t=h.navigation.tooltips[n])&&(t=""),e.find("ul").append('<li data-tooltip="'+t+'"><a href="#'+o+'"><span></span></a></li>')}e.find("span").css("border-color",h.navigation.bulletsColor)}();var v=P(".pp-section").length;function u(e,n){var t,o,i,a={destination:e,animated:n,activeSection:P(".pp-section.active"),anchorLink:e.data("anchor"),sectionIndex:e.index(".pp-section"),toMove:e,yMovement:(t=e,n=P(".pp-section.active").index(".pp-section"),t.index(".pp-section")<n?"up":"down"),leavingSection:P(".pp-section.active").index(".pp-section")+1};a.activeSection.is(e)||(void 0===a.animated&&(a.animated=!0),void 0!==a.anchorLink&&(n=a.anchorLink,i=a.sectionIndex,h.anchors.length?(location.hash=n,S(location.hash)):S(String(i))),a.destination.addClass("active").siblings().removeClass("active"),a.sectionsToMove=function(n){var e;e="down"===n.yMovement?P(".pp-section").map(function(e){if(e<n.destination.index(".pp-section"))return P(this)}):P(".pp-section").map(function(e){if(e>n.destination.index(".pp-section"))return P(this)});return e}(a),"down"===a.yMovement?(a.translate3d=X(),a.scrolling="-100%",h.css3||a.sectionsToMove.each(function(e){e!=a.activeSection.index(".pp-section")&&P(this).css(g(a.scrolling))}),a.animateSection=a.activeSection):(a.translate3d="translate3d(0px, 0px, 0px)",a.scrolling="0",a.animateSection=e),P.isFunction(h.onLeave)&&h.onLeave.call(this,a.leavingSection,a.sectionIndex+1,a.yMovement),o=a,h.css3?(b(o.animateSection,o.translate3d,o.animated),o.sectionsToMove.each(function(){b(P(this),o.translate3d,o.animated)}),setTimeout(function(){f(o)},h.scrollingSpeed)):(o.scrollOptions=g(o.scrolling),o.animated?o.animateSection.animate(o.scrollOptions,h.scrollingSpeed,h.easing,function(){m(o),f(o)}):(o.animateSection.css(g(o.scrolling)),setTimeout(function(){m(o),f(o)},400))),i=a.anchorLink,h.menu&&(P(h.menu).find(".active").removeClass("active"),P(h.menu).find('[data-menuanchor="'+i+'"]').addClass("active")),e=a.anchorLink,i=a.sectionIndex,h.navigation&&(P("#pp-nav").find(".active").removeClass("active"),(e?P("#pp-nav").find('a[href="#'+e+'"]'):P("#pp-nav").find("li").eq(i).find("a")).addClass("active")),s=a.anchorLink,i=(new Date).getTime(),c=i)}function f(e){P.isFunction(h.afterLoad)&&h.afterLoad.call(this,e.anchorLink,e.sectionIndex+1)}function m(n){"up"===n.yMovement&&n.sectionsToMove.each(function(e){P(this).css(g(n.scrolling))})}function g(e){return"vertical"===h.direction?{top:e}:{left:e}}function S(e){e=e.replace("#",""),P("body")[0].className=P("body")[0].className.replace(/\b\s?pp-viewing-[^\s]+\b/g,""),P("body").addClass("pp-viewing-"+e)}function w(){return(new Date).getTime()-c<t+h.scrollingSpeed}function b(e,n,t){e.toggleClass("pp-easing",t),e.css({"-webkit-transform":n,"-moz-transform":n,"-ms-transform":n,transform:n})}P(".pp-section").each(function(e){P(this).data("data-index",e),P(this).css("z-index",v),e||0!==P(".pp-section.active").length||P(this).addClass("active"),void 0!==h.anchors[e]&&P(this).attr("data-anchor",h.anchors[e]),void 0!==h.sectionsColor[e]&&P(this).css("background-color",h.sectionsColor[e]),h.verticalCentered&&!P(this).hasClass("pp-scrollable")&&P(this).addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />'),v-=1}).promise().done(function(){h.navigation&&(P("#pp-nav").css("margin-top","-"+P("#pp-nav").height()/2+"px"),P("#pp-nav").find("li").eq(P(".pp-section.active").index(".pp-section")).find("a").addClass("active")),P(Y).on("load",function(){var e;e=Y.location.hash.replace("#",""),0<(e=P(N).find('.pp-section[data-anchor="'+e+'"]')).length&&u(e,h.animateAnchor)}),P.isFunction(h.afterRender)&&h.afterRender.call(this)}),P(Y).on("hashchange",function(){var e=Y.location.hash.replace("#","").split("/")[0];e.length&&e&&e!==s&&u(isNaN(e)?P(N).find('[data-anchor="'+e+'"]'):P(".pp-section").eq(e-1))}),P(N).keydown(function(e){if(h.keyboardScrolling&&!w())switch(e.which){case 38:case 33:o.moveSectionUp();break;case 40:case 34:o.moveSectionDown();break;case 36:o.moveTo(1);break;case 35:o.moveTo(P(".pp-section").length);break;case 37:o.moveSectionUp();break;case 39:o.moveSectionDown();break;default:return}}),h.normalScrollElements&&(P(N).on("mouseenter",h.normalScrollElements,function(){o.setMouseWheelScrolling(!1)}),P(N).on("mouseleave",h.normalScrollElements,function(){o.setMouseWheelScrolling(!0)}));var x=(new Date).getTime();function M(e){var n=(new Date).getTime(),t=(e=e||Y.event).wheelDelta||-e.deltaY||-e.detail,o=Math.max(-1,Math.min(1,t)),i=void 0!==e.wheelDeltaX||void 0!==e.deltaX,i=Math.abs(e.wheelDeltaX)<Math.abs(e.wheelDelta)||Math.abs(e.deltaX)<Math.abs(e.deltaY)||!i;149<d.length&&d.shift(),d.push(Math.abs(t));t=n-x;if(x=n,200<t&&(d=[]),!w()){n=C(P(".pp-section.active")),t=y(d,10);return y(d,70)<=t&&i&&(o<0?T("down",n):0<o&&T("up",n)),!1}}function y(e,n){for(var t=0,o=e.slice(Math.max(e.length-n,1)),i=0;i<o.length;i++)t+=o[i];return Math.ceil(t/n)}function T(e,n){var t,e="down"==e?(t="bottom",o.moveSectionDown):(t="top",o.moveSectionUp);if(0<n.length){if(!function(e,n){{if("top"===e)return!n.scrollTop();if("bottom"===e)return n.scrollTop()+1+n.innerHeight()>=n[0].scrollHeight}}(t,n))return 1;e()}else e()}function C(e){return e.filter(".pp-scrollable")}function k(){var e=Y.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"};return e}function E(e){var n=new Array;return n.y=(void 0!==e.pageY&&(e.pageY||e.pageX)?e:e.touches[0]).pageY,n.x=(void 0!==e.pageX&&(e.pageY||e.pageX)?e:e.touches[0]).pageX,n}function L(e){return void 0===e.pointerType||"mouse"!=e.pointerType}function D(e){e=e.originalEvent;L(e)&&(e=E(e),a=e.y,r=e.x)}function I(e){var n,t=e.originalEvent;!function e(n,t){t=t||0;n=P(n).parent();return!!(t<h.normalScrollElementTouchThreshold&&n.is(h.normalScrollElements))||t!=h.normalScrollElementTouchThreshold&&e(n,++t)}(e.target)&&L(t)&&((n=C(P(".pp-section.active"))).length||e.preventDefault(),w()||(t=E(t),l=t.y,p=t.x,"horizontal"===h.direction&&Math.abs(r-p)>Math.abs(a-l)?Math.abs(r-p)>i.width()/100*h.touchSensitivity&&(p<r?T("down",n):r<p&&T("up",n)):Math.abs(a-l)>i.height()/100*h.touchSensitivity&&(l<a?T("down",n):a<l&&T("up",n))))}function X(){return"vertical"!==h.direction?"translate3d(-100%, 0px, 0px)":"translate3d(0px, -100%, 0px)"}P(N).on("click touchstart","#pp-nav a",function(e){e.preventDefault();e=P(this).parent().index();u(P(".pp-section").eq(e))}),P(N).on({mouseenter:function(){var e=P(this).data("tooltip");P('<div class="pp-tooltip '+h.navigation.position+'">'+e+"</div>").hide().appendTo(P(this)).fadeIn(200)},mouseleave:function(){P(this).find(".pp-tooltip").fadeOut(200,function(){P(this).remove()})}},"#pp-nav li")}}(jQuery,document,window);